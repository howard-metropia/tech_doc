# Migration Documentation: 20230821074256_MET-13192

## ğŸ“‹ Migration Overview
- **Purpose:** Enhance duo validation with status tracking and payment status fields
- **Date:** 2023-08-21 07:42:56
- **Ticket:** MET-13192
- **Risk Level:** Medium

## ğŸ”§ Schema Changes
```sql
ALTER TABLE duo_validated_result ADD COLUMN validation_status INT NOT NULL DEFAULT 0 
COMMENT 'é©—è­‰ç‹€æ…‹ï¼š0 init, 1 started, 2 passed';

ALTER TABLE duo_validated_result ADD COLUMN payment_status INT NOT NULL DEFAULT 0 
COMMENT 'ä¹˜å®¢ä»˜æ¬¾ç‹€æ…‹ï¼š0 init, 1 ä»˜æ¬¾, 2 ä¸ä»˜æ¬¾';

ALTER TABLE duo_validated_result ADD COLUMN modified_on DATETIME NOT NULL 
DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP;
```

## ğŸ“ Changes Summary
| Operation | Table/Collection | Field/Index | Description |
|-----------|-----------------|-------------|-------------|
| ADD | duo_validated_result | validation_status | Validation workflow status |
| ADD | duo_validated_result | payment_status | Payment processing status |
| ADD | duo_validated_result | modified_on | Auto-update timestamp |

## â¬†ï¸ Up Migration
- Adds validation status tracking (0=init, 1=started, 2=passed)
- Adds payment status for passenger payments
- Includes modification timestamp for audit trail

## â¬‡ï¸ Down Migration
- Removes all three added columns
- Error handling preserves existing data

## âš ï¸ Important Notes
- Supports multi-step validation workflow
- Chinese comments indicate Taiwan market focus
- Modified timestamp tracks record changes

## ğŸ·ï¸ Tags
**Keywords:** duo-validation status payment workflow
**Category:** #migration #database #schema #carpool